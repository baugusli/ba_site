<!DOCTYPE html>
<html>
<head>
    <title>Bryan Augusli</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
    <meta charset="UTF-8">
    <meta property="og:title" content="Collage Group Insights" />
    <meta property="og:description" content="Insights tool by Collage Group" />
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimal-ui"/>
    <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Rubik" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Josefin+Sans" rel="stylesheet"> 

    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">

    <!--<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous">-->
    
    <!--
      <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script> 
    -->
    <link rel="stylesheet" href="bootstrap.css">
    <script src="jquery.js"></script>
    <!--
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    -->
    <!--
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
    -->
    <script src="bootstrap.js"></script>
    <script src="d3.js"></script>
    <!--<script src="http://d3js.org/d3.v3.min.js"></script>-->
    <style type="text/css">
        body{
          margin: 0px;
          overflow-x: hidden;
          /*overflow: hidden;*/
        }
        /* SVG Styles */
        circle {
            stroke: #EFEDF5;
            fill: #EFEDF5;
            pointer-events: none;
        }
        line {
            pointer-events: none;
            stroke: #EFEDF5;
            stroke-width: 2px;
            opacity: .05;
        }
        path{
            /*stroke: #EFEDF5;*/
            stroke: #144A56;
            /*stroke-width: 4px;*/
        }

        /* Common Classes */

        .title-color {
          /*color: #144A56;*/
          /*color: #EDE8E2;*/
          color: white;
        }
        .title-font {
          font-family: 'Josefin Sans', lato, sans-serif;
        }
        .middle-align {
          text-align: center;
        }
        .left-align {
          text-align: left;
        }
        .overlay {
          position: absolute;
        }
        .full-width {
          width: 100%;
        }
        .left-align {
          text-align:left;
        }
        .top-align {
          vertical-align: top;
        }
        .main-content {
          /*85vh*/
          height: 100vh;
        }
        .main-font {
          font-family: 'Rubik', 'Lato', 'Open Sans', Arial, sans-serif;
        }
        .accent-color {
          color: #144A56;
        }
        .content {
          font-size: 1.2em;
          padding: 80px 0;
        }
        .content-icon img {
          max-width: 60px;
          padding-bottom: 10px;
        }
        .sub-content {
          font-size: 1em;
          padding: 30px 0;
        }
        .sub-content div:first-child {
          padding-bottom: 10px;
        }
        .grey-background {
          background-color: #F2F2F2;
        }
        .accent-background-color {
          background-color: #144A56;
        }

        /* Custom Classes */
        .brain-content {
          position: absolute;
          display: none;
          text-align: center;
        }
        .brain-content-title {
          font-size: 3em;
          font-weight: bold;
          text-align: center;
        }
        .brain-content-sub-title {
          font-family: Larke-Sans-Bold, 'Lato', serif;
        }
        .brain-content-col .row{
          margin-bottom: 10px;
        }
        .ba-btn {
          border: solid 1px #144A56;
          stroke: #144A56;
        }
        .ba-btn:hover {
          color: #fff !important;
          background-color: #144A56;
        }
        .marketing-overlay-position {
          top: 78%;
        }
        .main-background {
          background-color: #EDE8E2;
        }
        .btn-social {
          border: 0;
          color: #fff;
          border-radius: 100%;
          display: inline-block;
          width: 36px;
          height: 36px;
          line-height: 36px;
          text-align: center;
          padding: 0;
        }
        .btn-social.btn-facebook {
          background: #4f7dd4;
        }
        .btn-social.btn-facebook:hover {
          background: #789bde;
        }
        .btn-social.btn-twitter {
          background: #5bceff;
        }
        .btn-social.btn-twitter:hover {
          background: #8eddff;
        }
        .btn-social.btn-linkedin {
          background: #21a6d8;
        }
        .btn-social.btn-linkedin:hover {
          background: #49b9e3;
        }
        .btn-social.btn-google-plus {
          background: #dc422b;
        }
        .btn-social.btn-google-plus:hover {
          background: #e36957;
        }
        .btn-social:hover {
          color: #fff;
        }
        .no-bottom-padding {
          padding-bottom: 0px !important;
        }
        .footer {
          padding: 20px 0;
          color: white;
        }

        /* Custom Ids */
        #ba-title {
          font-size: 3em;
        }
        #brain_canvas {
          /*background-color: #EDE8E2;*/
          /*margin-top: 4%;*/
        }
        #pick-me-brain{
          font-size: 1.5em;
          stroke: #144A56;
          fill: #144A56;
        }
        #title-overlay {
          border-bottom: 1px solid #144A56;
        }
        #marketing-overlay {
          font-size: 1em;
          stroke: #144A56;
        }
        #profile-pic {
          width: 200px;
        }
        #sub-content-school img{
          width: 150px;
          height: 150px;
          padding-bottom: 20px;
        }

        /* Media Selectors */
        @media(min-height:800px){
          .main-content {
            /*85vh*/
            height: 80vh;
          }
          .marketing-overlay-position {
            top: 60%;
          }
          .btn-padding {
            padding: 30px 0;
          }
        }
    </style>
</head>
<body>
  <!-- things to do -->
  <!-- Proper title alignment, proper icon (svg if possible) for each brain section, Click me text beside brain, Title banner for every brain section on the left, click event to show more details on the right, Contact me on the bottom of brain and social media links, Top right navigation menu?-->
  <!-- brain icon beside title-->
  <!-- Link to https://icons8.com/license/ -->
  <!-- an engineer. avid gamers? Problem solver -->
  <div class="main-content main-background">
    <div id="title-overlay" class="full-width middle-align accent-background-color">
      <span id="ba-title" class="title-color title-font">
        <img class="align-middle" style="width:60px;" src="assets/images/icons/ba_brain_icon.svg">
        bryan augusli
      </span>
    </div>
    <div id="brain_canvas">
    </div>
    <div id="marketing-overlay" class="marketing-overlay-position overlay full-width middle-align main-font accent-color">
      <div>
        <h2>An Engineer With Expertise In Data.</h2>
        <h2>Video Game Enthusiast.</h2>
      </div>
      <div class="btn-padding">
        <a class="btn ba-btn">CONTACT ME</a>
      </div>
    </div>
  </div>
  <div class="container-fluid content main-font content-icon">
    <div class="row">
      <div class="col-md-4 offset-md-2">
        <div class="row justify-content-center">
          <div class="col-auto">
            <img src="assets/images/brain-content-icons/icons8-graduation-scroll-100.png">
          </div>
          <div class="col-10">
           Graduated Magna Cum Laude with a B.S. Information Technology (Top 7.5%)
          </div>
        </div>
      </div>

      <div class="col-md-4 offset-md-1">
        <div class="row justify-content-center">
          <div class="col-auto">
            <img src="assets/images/brain-content-icons/icons8-business-100.png">
          </div>
          <div class="col-10">
           Three years of experience in Data Engineering and Business Intelligence
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- About me -->
  <div class="container-fluid sub-content main-font middle-align grey-background">
    <div class="row-sm-12 middle-align">
      <h3>About Me</h3>
    </div>
    <div class="row align-items-center">
      <div class="col-md-2 col-sm-12 offset-md-2">
        <img src="assets/images/ba.png" id="profile-pic" class="img-responsive img-thumbnail" alt="Bryan Austin Augusli">
        <h4>Bryan Austin Augusli</h4>
        <a class="btn btn-social btn-linkedin" href="https://www.linkedin.com/in/baugusli" target="_blank">
          <i class="fab fa-linkedin-in"></i>
        </a>
        <a class="btn btn-social btn-facebook" href="https://www.facebook.com/baugusli" target="_blank">
          <i class="fab fa-facebook-f"></i>
        </a> 
        <a class="btn btn-social btn-google-plus" href="https://plus.google.com/u/0/101228925204580515169/about" target="_blank">
          <i class="fab fa-google-plus-g"></i>
        </a> 
      </div>
      <div class="col-md-6 col-sm-12 left-align">
        <p>
        I am Bryan Austin Augusli, born in Indonesia, moved to Singapore to study for five years until eventually went to George Mason University and graduated with a major in B.S. Information Technology with a minor in Business. 
        </p>

        <p>
        I was introduced to the world of big data when I interned at Amtrak as a Business Intelligence developer building reports and dashboards for business leaders at Amtrak. With my love of data, I pursued my passion and got a job as a Data Engineer at Collage Group, dealing with public and proprietry data, data warehouses, ETL system, pretty dashboards!
        </p>

        <p>
        During my spare time, I like to play challenging video games with great story, combat and puzzle. When I truly want to relax, I would watch movies or korean dramas. Once I realised that I ate too much delicious food, I would then exercise, usually by swimming; It burns a lot of calories.
        </p>

        <p>
        Currently, learning Korean Language; so that I can watch korean dramas and movies without subtitle. In addition, I'm also studying machine learning algorithms for my personal project.
        </p>
      </div>
    </div>
  </div>

  <!-- Language -->
  <div id="sub-content-language" class="container-fluid sub-content main-font middle-align no-bottom-padding">
    <div class="row-sm-12 middle-align no-bottom-padding">
      <h3>Speaks Four Different Languages</h3>
    </div>
    <div class="row align-items-center">
      <div class="col-12">
        <img src="assets/images/language-white-bck-sm.png">
      </div>
    </div>
  </div>

  <!-- Education -->
  <div id="sub-content-school" class="container-fluid sub-content main-font middle-align main-background">
    <div class="row-sm-12 middle-align">
      <h3>Studied in Three Different Countries</h3>
    </div>
    <div class="row align-items-center">
      <div class="col-md-4 col-sm-12">
        <img src="assets/images/school/GMU-logo.png" style="width:200px;">
        <h4>George Mason University, Virginia, U.S.</h4>
        <p>B.S in Information Technology with Minor in Business, 3.98 Major GPA on 4.00 scale</p>
      </div>
      <div class="col-md-4 col-sm-12">
        <img src="assets/images/school/nyp-logo-no-background.png" style="width:320px; height: 100px;">
        <h4>Nanyang Polytechnic, Singapore</h4>
        <p>Diploma in Information Technology, 3.62 GPA on 4.00 scale</p>
      </div>
      <div class="col-md-4 col-sm-12">
        <img src="assets/images/school/universal-school.png">
        <h4>Universal School, Indonesia</h4>
        <p>High School</p>
      </div>
    </div>
  </div>

  <!-- Business Intelligence -->
  <div id="sub-content-bi" class="container-fluid sub-content main-font">
    <div class="row-sm-12 middle-align">
      <h3>Introduced to the World of Data from Internship at Amtrak as a Business Intelligence Developer</h3>
    </div>
    <div class="row align-items-center">
      <div class="col-md-5 col-sm-12" style="padding: 50px;">
        <img class="img-fluid" src="assets/images/laptop-dashboard.png">
      </div>
      <div class="col-md-6 col-sm-12">
        <div class="row">
          <div class="col-12">
            <h4>Develop Dashboard and Reports</h4>
            <p>Leveraged <b>Tableu</b> to develop beautiful and dynamic dashboard used by business analysts to view organization's proprietry data</p>
            <p>Developed daily reports on web, train, customer satisfaction metrics using <b>SAP BusinessObject</b></p>
          </div>
          <div class="col-12">
            <h4>Built Data Tools</h4>
            <p>Led the project to develop a geospatial analysis tool allowing business analyst to cut and slice census data combined with company proprietry data to analyze U.S. national market and vizualise the data on a map.</p>
            <p>Contributor to the development of a data tool that crosstab data from different sources.</p>
            <p>Created a tool to report internal web metrices used to create better content.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Data Engineer -->
  <div id="sub-content-data_engineer" class="container-fluid sub-content main-font middle-align content-icon grey-background">
    <div class="row-sm-12 middle-align">
      <h3>Became a Data Engineer</h3>
    </div>
    <div class="row">
      <div class="col-md-12 col-sm-12">
        <div class="row">
          <div class="col-4">
            <img src="assets/images/data-engineer/icons8-database-administrator-100.png">
            <h4>Extraction Transformation Loading (ETL)</h4>
            <p>Develop ETL processes using <b>Informatica</b> or <b>Pentaho Data Integration</b> to extract data from multiple different sources, transform the data and load them into a data warehouse
            </p>
          </div>
          <div class="col-4">
            <img src="assets/images/data-engineer/icons8-big-data-100.png">
            <h4>Data Warehouse</h4>
            <p>Responsible for architecting data warehouse schema which houses all of organizational data that powers data tools used by business analysts. <b>Amazon Redshift</b> is one of the data warehouse product that I work with. On top of that, I also work with traditional Relational Database System (RDBMS), such as, <b>PostgreSQL</b> and <b>MySQL</b>.</p>
          </div>
          <div class="col-4">
            <img src="assets/images/data-engineer/icons8-data-quality-240.png">
            <h4>Working with Data</h4>
            <p>Wrote <b>Python</b> and <b>R</b> script for data transformation, cleaning, integration check and analysis with neural net package in R.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Video Games -->
  <div id="sub-content-game" class="container-fluid sub-content main-font">
    <div class="row-sm-12 middle-align">
      <h3>De-stress by playing video game..</h3>
    </div>
    <div class="row align-items-center">
      <div class="col-md-4 col-sm-12 offset-md-3">
        <div class="row">
          <div class="col-12">
            <h4>Single Player Games</h4>
            <p>Big fan of games with deep and rich story, stunning graphic, challenging puzzle and fluid combat with complex mechanics.</p>
            <p>Top 5 Favorite Games:
              <ul>
                <li>The Last of Us</li>
                <li>God of War</li>
                <li>Monster Hunter</li>
                <li>Kingdom Hearts</li>
                <li>Uncharted</li>
              </ul>
            </p>
          </div>
        </div>
      </div>
      <div class="col-md-3 col-sm-12">
        <img class="img-fluid" src="assets/images/ps4-controller.png">
      </div>
    </div>
  </div>

   <!-- Food -->
  <div id="sub-content-game" class="container-fluid sub-content main-font main-background">
    <div class="row-sm-12 middle-align">
      <h3>While eating food..</h3>
    </div>
    <div class="row align-items-center">
      <div class="col-md-4 col-sm-12">
        <img src="assets/images/school/food">
      </div>
      <div class="col-md-8 col-sm-12">
        <div class="row">
          <div class="col-12">
            <h4>Chinese Food</h4>
            <p>Noodle, Dim Sum</p>
          </div>
          <div class="col-12">
            <h4>Western Food</h4>
            <p>Burger, Steak</p>          
          </div>
          <div class="col-12">
            <h4>Korean Food</h4>
            <p>Bulgogi, SPicy Pork Belly</p>          
          </div>
          <div class="col-12">
            <h4>Japanese Food</h4>
            <p>Sushi, Ramen</p>          
          </div>
        </div>
      </div>
    </div>
  </div>

   <!-- Movies -->
  <div id="sub-content-game" class="container-fluid sub-content main-font ">
    <div class="row-sm-12 middle-align">
      <h3>I watch TV-shows and Movies</h3>
    </div>
    <div class="row align-items-center">
      <div class="col-md-4 col-sm-12">
        <img src="assets/images/school/movies">
      </div>
      <div class="col-md-8 col-sm-12">
        <div class="row">
          <div class="col-12">
            <h4>Korean Dramas</h4>
            <p>Great story.. </p>
            <p>Genres: Romance, Comedy, Educational, Thriller, Myster</p>
          </div>
          <div class="col-12">
            <h4>Movies</h4>
            <p>Genres: Action, Thriller, Mystery</p>          
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Sports -->
  <div id="sub-content-sport" class="container-fluid sub-content main-font grey-background">
    <div class="row-sm-12 middle-align">
      <h3>Gotta burn those fats..</h3>
    </div>
    <div class="row align-items-center">
      <div class="col-md-12 col-sm-12">
        <div class="row">
          <div class="col-12">
            <h4>Badminton</h4>
            <p>USed to train every week. Very popular in hometown.</p>
          </div>
          <div class="col-12">
            <h4>Swimming</h4>
            <p>USed to compete and train every week</p>          
          </div>
          <div class="col-12">
            <h4>Soccer</h4>
            <p>Rarely play soccer</p>          
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Learning -->
  <div id="sub-content-sport" class="container-fluid sub-content main-font grey-background">
    <div class="row-sm-12 middle-align">
      <h3>Never stop learning</h3>
    </div>
    <div class="row align-items-center">
      <div class="col-md-12 col-sm-12">
        <div class="row">
          <div class="col-12">
            <h4>Korean Language</h4>
            <p>Learning korean</p>
          </div>
          <div class="col-12">
            <h4>Data Science</h4>
            <p>Bayes algorithm, logistic regression</p>          
          </div>
          <div class="col-12">
            <h4>Machine Learning</h4>
            <p>Bayes algorithm, logistic regression</p>          
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Learning -->
  <div id="sub-content-sport" class="container-fluid sub-content main-font middle-align">
    <div class="row-sm-12 middle-align">
      <h3>Notable skills</h3>
    </div>
    <div class="row align-items-center">
      <div class="col-md-12 col-sm-12">
        List skills..
      </div>
    </div>
  </div>
  

  <!-- Footers -->
  <div class="container-fluid footer main-font accent-background-color">
    <div class="row">
      <div class="col-md-4 col-sm-6 offset-md-2">
        <span>Â© 2018 Bryan Austin Augusli. All Rights Reserved.</span>
        <span><a href="https://icons8.com/license/">Icons8</a></span>
      </div>
    </div>
  </div>


  <div id="brain-content-sport" class="container brain-content title-font title-color">
    <span class="brain-content-title">Sports</span>
    <div class="col brain-content-col">
      <!-- badminton -->
      <div class="row">
        <div class="col-4">
          <img src="assets/images/brain-content-icons/icons8-badminton-player-90.png">
        </div>
        <div class="col-8 left-align top-align brain-content-desc main-font">
          <div><h3>Badminton</h3></div>
          <div> Play badminton smack that shuttlecock</div>
        </div>
      </div>
      <!-- badminton end -->
      <!-- swimming -->
      <div class="row">
        <div class="col-4">
          <img src="assets/images/brain-content-icons/icons8-swimming-filled-100.png">
        </div>
        <div class="col-8 left-align top-align brain-content-desc main-font">
          <div><h3>Swim</h3></div>
          <div> I swim like there is no water</div>
        </div>
      </div>
      <!-- swimming end-->
      <!-- soccer -->
      <div class="row">
        <div class="col-4">
          <img src="assets/images/brain-content-icons/icons8-soccer-filled-100.png">
        </div>
        <div class="col-8 left-align top-align brain-content-desc main-font">
          <div><h3>Soccer</h3></div>
          <div> I play soccer.</div>
        </div>
      </div>
      <!-- soccer end-->
    </div>
  </div>
<script type="text/javascript">
    var windowsHeight = window.innerHeight;
    var windowsWidth = window.innerWidth;
    // h = window.innerHeight > 700 ? 700 : (window.innerHeight || 500),
    var w = windowsWidth;
    var h = windowsHeight > 800 ? windowsHeight * 0.5 : windowsHeight * 0.67;
    var radius = 5.25;
    var links = [];
    var simulate = true;
    var zoomToAdd = true;
        // https://github.com/mbostock/d3/blob/master/lib/colorbrewer/colorbrewer.js#L105
        // ['#214457', '#4C6877', '#798D9B', '#7B8D9A', '#A6B1B9', '#D0D8DB'].reverse()
        // Red
        // colorRange = ['#8C1E47', '#A44868', '#BA738D', '#B1718C', '#D0A0B4', '#E7CFD7'].reverse()
        // For no background = EFEDF4
        // Ori first = DAE3E8
        colorRange = ['#DAE3E8', '#6BA9CB', '#3B83AA', '#1E668C', '#064E75', '#024061'];
        // switch color max and min ??
        color = d3.scale.quantize().domain([10000, 7250]).range(colorRange)
        // color = d3.scale.quantize().domain([7250, 10000]).range(colorRange)

    var brainIconPath = "assets/images/brain-icons/"
    var brainIdMapping = {
      // Education
      0: {
          iconPath:'icons8-mortarboard-90.png',
          contentEleId: 'sub-content-school'
         },
      // Language
      1: {
          iconPath: 'icons8-language-filled-500.png',
          contentEleId: ''
         },
      // Games
      2: {
          iconPath: 'icons8-joystick-filled-100.png',
          contentEleId: ''
         },
      // Sports
      3: {
          iconPath: 'icons8-weightlifting-filled-100.png',
          contentEleId: 'brain-content-sport'
         },
      // Movie/ tv show
      4: {
          iconPath: 'icons8-movie-96.png',
          contentEleId: ''
         },
      // data engineer / data warehouse
      5: {
          iconPath: 'icons8-database-administrator-90.png',
          contentEleId: ''
         },
      // business intelligence.. raw data useseless to information that can predict the future
      6: {
          iconPath: 'icons8-combo-chart-filled-100.png',
          contentEleId: ''
         },
      // Technology
      7: {
          iconPath: 'icons8-robot-filled-500.png',
          contentEleId: ''
         },
      // Food
      8: {
          iconPath: 'icons8-dining-room-filled-100.png',
          contentEleId: ''
         },
      // Learning
      // TODO: CHANGE TO OTHER SKILLS????!!!!??!?!?!
      9: {
          iconPath: 'icons8-mind-map-52.png',
          contentEleId: ''
         }
    }
    // For dynamic width..
    // var widthMultiplier = 0.096
    // var numVertices = (w * h / 2) / (w / widthMultiplier);
    var numVertices = 24;
    var vertices = d3.range(numVertices).map(function(i) {
        angle = radius * (i + 10);
        return {x: angle*Math.cos(angle)+(w/2) + 100, y: angle*Math.sin(angle)+(h/2) + 50};
    });

    var d3_geom_voronoi = d3.geom.voronoi().x(function(d) { return d.x; }).y(function(d) { return d.y; })
    var prevEventScale = 1;
    // ZOOM!!
    var zoom = d3.behavior.zoom().on("zoom", function(d,i) {
        if (zoomToAdd){
          if (d3.event.scale > prevEventScale) {
              angle = radius * vertices.length;
              vertices.push({x: angle*Math.cos(angle)+(w/2), y: angle*Math.sin(angle)+(h/2)})
          } else if (vertices.length > 2 && d3.event.scale != prevEventScale) {
              vertices.pop();
          }
          force.nodes(vertices).start()
        } else {
          if (d3.event.scale > prevEventScale) {
            radius += .01
          } else {
            radius -= .01
          }
          vertices.forEach(function(d, i) {
            angle = radius * (i+10);
            vertices[i] = {x: angle*Math.cos(angle)+(w/2), y: angle*Math.sin(angle)+(h/2)};
          });
          force.nodes(vertices).start()
        }
        prevEventScale = d3.event.scale;
    });

    // Keep number of vertices but run the force animation
    var zoomTest = d3.behavior.zoom().on("zoom", function(d, i) {
      force.nodes(vertices).start();
      prevEventScale = d3.event.scale;
    });

    /*
    d3.select(window)
      .on("keydown", function() {
        // shift
        if(d3.event.keyCode == 16) {
          zoomToAdd = false
        }

        // s
        if(d3.event.keyCode == 83) {
          simulate = !simulate
          if(simulate) {
            force.start()
          } else {
            force.stop()
          }
        }
      })
      .on("keyup", function() {
        zoomToAdd = true
      })
    */

    var svg = d3.select("#brain_canvas")
            .append("svg")
            .attr("width", w)
            .attr("height", h)
            // .call(zoomTest)
            // .call(zoom)

    var force = d3.layout.force()
            .charge(-300)
            .size([w, h])
            .on("tick", update);

    force.nodes(vertices).start();

    var circle = svg.selectAll("circle");
    var path = svg.selectAll("path");
    var link = svg.selectAll("line");
    var img = svg.selectAll("image");
    var imgW = 30;
    var imgH = 30;

    var moreDetail = function(d, i) {
      // drawThoughts(i);
      var subContentId = brainIdMapping[i].contentEleId;
      if (subContentId) location.hash = '#' + subContentId;
    };

    var percentageIncrease = 40;

    var getScaleTransformString = function(currXPos, currYPos, grow) {
      var percentageDivided = (percentageIncrease / 100)
      var scale = (grow) ? 1 + percentageDivided : 1 - percentageDivided;
      var scaleStr = 'scale(' + scale + ')';

      var scaledXPos = currXPos * percentageDivided;
      var scaledYPos = currYPos * percentageDivided;

      if (grow) {
        scaledXPos = -scaledXPos;
        scaledYPos = -scaledYPos;
      }

      var translateStr = 'translate(' + scaledXPos + ',' + scaledYPos + ')';

      var transformStr = translateStr + ' ' + scaleStr;
      return transformStr;
    };  


    var maxBrainId = 9;
    var maxBrainCoord;
    var resetScalingTransformation = function() {
      path[0].forEach(function(p, i) {
        d3.select(p).attr('transform', '');
      });
    };

    function generateThoughtPath(offset, dimension) {
       //////
      var thoughtPath = [];
      var width = dimension.width || 59;
      var height = dimension.height || 30;
      var startingX = maxBrainCoord.maxPoint.x + offset[0];
      var startingY = maxBrainCoord.maxPoint.y + offset[1];

      // thoughtPath.point = maxBrainCoord.maxPoint;
      thoughtPath.push([startingX, startingY]);
      thoughtPath.push([startingX + width * 0.026, startingY - height * 0.286]);
      thoughtPath.push([startingX + width * 0.195, startingY - height * 0.536]);
      thoughtPath.push([startingX + width * 0.485, startingY - height * 0.667]);
      thoughtPath.push([startingX + width * 0.805, startingY - height * 0.536]);
      thoughtPath.push([startingX + width * 0.974, startingY - height * 0.286]);
      thoughtPath.push([startingX + width * 1, startingY]);
      // middle
      thoughtPath.push([startingX + width * 0.974, startingY + height * 0.24]);
      thoughtPath.push([startingX + width * 0.814, startingY + height * 0.6]);
      thoughtPath.push([startingX + width * 0.5, startingY + height * 0.75]);
      thoughtPath.push([startingX + width * 0.186, startingY + height * 0.6]);
      thoughtPath.push([startingX + width * 0.026, startingY + height * 0.24]);
      //thoughtPath.push([startingX, startingY]);

      return thoughtPath;
    }

    function drawPath(thoughtPath) {
       svg.append("path")
        .attr("class", "dream-path")
        //.style("fill", function(d, i) { return color(0) })
        .attr("d", function(d, i) { 
          var data = "M" + thoughtPath.join("L") + "Z"; 
          return data; 
        })
        .transition().duration(150)
        //.style("fill", function(d) { return '#3783A6'});
        //.style("fill", function(d) { return '#E04230'});
        .style("fill", "none")
        .style("stroke-width", "3px")
        .style("stroke", "#144A56");
    }

    function drawThoughts(id) {
      var brainContentId = brainIdMapping[id].contentEleId;
      if (brainContentId) {
        var smallThoughtDimension = {width: 59, height: 30};
        var offset = [-4, 0];
        var firstThought = generateThoughtPath(offset, smallThoughtDimension);

        var secondOffset = [82, -30];
        var secondThought = generateThoughtPath(secondOffset, smallThoughtDimension);

        var contentDimension = {width: 400, height: 390};
        var contentOffset = secondOffset.map((coord, i) => (i === 0) ? coord + 30 : coord + 190);
        var content = generateThoughtPath(contentOffset, contentDimension);

        // Content
        var contentPadding = 10;
        var leftCoord = maxBrainCoord.maxPoint.x + contentOffset[0] + contentPadding;
        var topCoord = maxBrainCoord.maxPoint.y - contentDimension.height * 0.19;
        d3.select("#" + brainContentId)
          .style("left", leftCoord + 'px')
          .style("top", topCoord + 'px')
          .style("width", contentDimension.width + 'px')
          .style("height", contentDimension.height + 'px')
          .style("display", "block");

        d3.selectAll(".dream-path").remove();
        drawPath(firstThought);
        drawPath(secondThought);
        drawPath(content);
      }
    }

    var highlightPart = function(d, i) {
      resetScalingTransformation();
      if (i <= maxBrainId) {
        var xPos = d.point.x;
        var yPos = d.point.y;
        d3.select(this)
            .attr('transform', getScaleTransformString(xPos, yPos, true));
        this.parentNode.appendChild(this);

        var hoveredImage = img[0][i];
        hoveredImage.parentNode.appendChild(hoveredImage);

        document.body.style.cursor = "pointer";
      }
      
    }

    var highlightImage = function(d, i) {
      if (i <= maxBrainId) {
        var xPos = d.point.x;
        var yPos = d.point.y;
        var hoveredPath = path[0][i];
        d3.select(hoveredPath).attr('transform', getScaleTransformString(xPos, yPos, true));
        document.body.style.cursor = "pointer";
      }
    }

    var unhighlightPart = function(d, i) {
      d3.select(this)
        .attr('transform', '');
      document.body.style.cursor = "";
    }


    var drawImg = function() {
        img = img.data(d3_geom_voronoi(vertices));
        img.enter().append("image")
          .on("click", moreDetail)
          .on("mouseover", highlightImage)
          .transition().duration(1000);

        img
          .attr("xlink:href", function(d, i) {
            if (i <= maxBrainId) { 
              var imgPath = "";
              //var excludeColor = colorRange[colorRange.length - 1];
              var excludeColor = colorRange[0];
              if (color(d3.geom.polygon(d).area()) !== excludeColor) {
                imgPath = brainIconPath + brainIdMapping[i].iconPath;
              }
              return imgPath;
            }
          })
          .attr("x", function(d, i) { if (i <= maxBrainId) { return d.point.x - (imgW / 2);} })
          .attr("y", function(d, i) { if (i <= maxBrainId) { return d.point.y - (imgH / 2);} })
          .attr("width", imgW)
          .attr("height", imgH);
        img.exit().remove();
    };

    function setMaxBrainPath(data) {
      maxBrainCoord = data;

      var topRightBrainCoord = {x: 0, y: 0};
      maxBrainCoord.forEach(function(d, index) {
        if (index < maxBrainCoord.length - 1) {
          if (d[0] > topRightBrainCoord.x || index === 0) {
            topRightBrainCoord.x = d[0];
          }

          if (d[1] < topRightBrainCoord.y || index === 0) {
            topRightBrainCoord.y = d[1];
          }
        }
      });
      maxBrainCoord.maxPoint = topRightBrainCoord;
    }

    
    function update(e) {
        var voronoiVertices = d3_geom_voronoi(vertices);
        voronoiVertices = voronoiVertices.slice(0, maxBrainId + 1);
        path = path.data(voronoiVertices);
        path.enter().append("path")
            // drag node by dragging cell
            /*
            .call(d3.behavior.drag()
              .on("drag", function(d, i) {
                  vertices[i] = {x: vertices[i].x + d3.event.dx, y: vertices[i].y + d3.event.dy}
              })
            ) */
            .style("fill", function(d, i) { return color(0) });
        path.attr("d", function(d, i) { 
              if (i === maxBrainId) {
                setMaxBrainPath(d);
              }
              var data = "M" + d.join("L") + "Z"; 
              return data; 
              
            })
            .on("click", moreDetail)
            .on("mouseover", highlightPart)
            .on("mouseout", unhighlightPart)
            .transition().duration(150).style("fill", function(d, i) { return color(d3.geom.polygon(d).area()) });
        path.exit().remove();
        
        drawImg();

        var clickMePath = document.querySelector('#click-me-path');
        if (clickMePath) clickMePath.remove();
        svg.append("path")
          .attr("id", "click-me-path")
          //.style("fill", function(d, i) { return color(0) })
          .attr("d", function(d, i) { 
            // TODO: MAGIC NUMBER!!
            // Not actual width and height..
            var brainWidth = 330;
            var brainHeight = 140;
            var startCoord = (maxBrainCoord.maxPoint.x - brainWidth) + "," + (maxBrainCoord.maxPoint.y + brainHeight);

            var data = "M" + startCoord
            + " C" + (maxBrainCoord.maxPoint.x - brainWidth * 0.7) + "," + (maxBrainCoord.maxPoint.y - brainHeight * 0.82)
            + " " + (maxBrainCoord.maxPoint.x) + "," + (maxBrainCoord.maxPoint.y + brainHeight * 0.9)
            + " " + maxBrainCoord.maxPoint.x + "," + maxBrainCoord.maxPoint.y;
            return data; 
          })
          //.style("fill", function(d) { return '#3783A6'});
          //.style("fill", function(d) { return '#E04230'});
          .style("fill", "none")
          .style("stroke-width", "3px")
          .style("stroke", "#144A56")
          .style("display", "none");

        var pickMePath = document.querySelector('#pick-me-brain');
        if (pickMePath) pickMePath.remove();
        svg
          .append("text")
          .attr("id", "pick-me-brain")
          .attr("class", "main-font")
          .append("textPath")
          .attr('xlink:xlink:href', '#click-me-path')
          .text("Pick My Brain");    

        if(!simulate) force.stop()
    }
</script>
</body>
</html>
